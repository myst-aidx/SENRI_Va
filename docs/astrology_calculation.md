# 占い計算方式について

このドキュメントでは、占いチャットボットで使用している占いの計算方式について説明します。

## 星座の計算方法

星座は、生まれた日付に基づいて以下のように決定されます。

| 星座   | 開始日   | 終了日   |
|------|--------|--------|
| 山羊座  | 12月22日 | 1月19日  |
| 水瓶座  | 1月20日  | 2月18日  |
| 魚座   | 2月19日  | 3月20日  |
| 牡羊座  | 3月21日  | 4月19日  |
| 牡牛座  | 4月20日  | 5月20日  |
| 双子座  | 5月21日  | 6月21日  |
| 蟹座   | 6月22日  | 7月22日  |
| 獅子座  | 7月23日  | 8月22日  |
| 乙女座  | 8月23日  | 9月22日  |
| 天秤座  | 9月23日  | 10月23日 |
| 蠍座   | 10月24日 | 11月22日 |
| 射手座  | 11月23日 | 12月21日 |

## 月星座、上昇宮の計算方法

本格的な月星座と上昇宮を計算するには、以下の情報が必要です。

*   **正確な出生日時:**  月星座は月の位置、上昇宮は生まれた瞬間の東の地平線にある星座によって決まります。そのため、正確な出生時間が必要です。
*   **出生場所の経度・緯度:** 上昇宮は出生場所によって大きく変わります。正確な場所の情報がないと、正確な上昇宮を計算できません。

これらの情報に基づいて、天文計算を行い、月の位置と東の地平線にある星座を特定する必要があります。占星術のライブラリ（例: JavaScriptの"astronomy-bundle")を使用することで、これらの計算を自動化できます。

## 相性の計算方法

相性は、星座が持つ元素に基づいて計算されます。

*   **同じ元素:** 90点 (とても相性が良い)
*   **相性の良い元素:** 80点 (互いを高め合える)
*   **その他の組み合わせ:** 60点 (それぞれの良さを活かすことで良い関係を築ける)

各星座の元素は以下の通りです。

*   **火:** 牡羊座、獅子座、射手座
*   **土:** 牡牛座、乙女座、山羊座
*   **風:** 双子座、天秤座、水瓶座
*   **水:** 蟹座、蠍座、魚座

相性の良い元素の組み合わせは以下の通りです。

*   火と風
*   土と水

## 日毎の運勢の計算方法

本格的な日毎の運勢を計算するには、以下の要素を考慮する必要があります。

*   **個人の出生データ:**  個人のホロスコープを作成するために、正確な出生日時と出生場所が必要です。
*   **トランジット:**  特定の日時における惑星の実際の位置（トランジット）と、個人の出生時の惑星の位置を比較します。
*   **アスペクト:** トランジットの惑星と出生時の惑星が形成する角度（アスペクト）を分析します。主要なアスペクト（コンジャンクション、セクスタイル、スクエア、トライン、オポジション）が特に重要です。
*   **ハウス:**  トランジットの惑星が個人のホロスコープのどのハウスに入っているかを考慮します。ハウスは人生の特定の領域を表します。

これらの要素を総合的に分析することで、より詳細でパーソナルな日毎の運勢を算出できます。占星術のライブラリを使用することで、これらの複雑な計算を効率的に行うことができます。

### 今後の展望

今後は、以下の要素を組み込むことで、占い機能をさらに強化する予定です。

*   **占星術ライブラリの導入:**  より正確な天体計算を行うために、JavaScriptの占星術ライブラリ（例: "astronomy-bundle"）の導入を検討します。
*   **ユーザーからの情報収集:**  月星座と上昇宮を正確に計算するために、ユーザーから出生日時と出生場所の情報を収集する仕組みを導入します。
*   **アスペクトの分析:**  日毎の運勢に、惑星同士のアスペクトの影響を反映させます。
